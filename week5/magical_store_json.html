<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<title>Magical Store with catalog served from a JSON service</title>
        
        <LINK href="style.css" rel="stylesheet" type="text/css">
        
        <script src="MagicalItem.js" type="text/javascript"></script>
        <script src="MagicalItemView.js" type="text/javascript"></script>
        
        <script>
            //magicalItems is set by the javascript in catalog.js
            var magicalItems = null;
        </script>
        
        <script src="http://127.0.0.1/~lorien234/javascript_class_week5/catalog_json.js"></script>
        
        <script>
            
            //turn our data objects into MagicalItems
            for (var i=0, l=magicalItems.length; i<l; i++) {
                
                var item = magicalItems[i];
                magicalItems[i].__proto__ = new MagicalItem;
                magicalItems[i].constructor = MagicalItem;
                
                //console.log(magicalItems[i].__proto__, magicalItems[i].regenerate);
            }
            
            function buildCatalog() {
                
                var catalogDiv = document.getElementById('catalog');
                
                for (var i=0, l=magicalItems.length; i<l; i++) {
                    var item = magicalItems[i];
                    var itemView = new MagicalItemView(catalogDiv, item);
                    itemView.draw();
                }
            }
            
        </script>
	</head>
    <body onload="buildCatalog();">
        <h1>Magical Store with JSON</h1>
        <hr />
        <h2>Catalog</h2>
        <div id="catalog"></div>
    </body>
</html>
